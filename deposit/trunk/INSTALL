Instructions for building the deposit web application stack on stock solaris10. 
If you only want to work with the code as a developer see DEVELOP.

- install sun studio (compilers)
  http://developers.sun.com/sunstudio/

- configure PATH in /etc/profile
  export PATH=/opt/SUNWspro/bin:/opt/local/python2.6/bin:/usr/ccs/bin:/opt/local/postgresql/bin:/usr/sbin:$PATH
  pfexec reboot

- mkdir /opt/local
  chown user:group /opt/local # avoid having to install as root

- get deposit source code
  cd /opt/local
  svn export https://rdc.lctl.gov/svn/transfer/deposit/tags/{release_tag} 
  ln -s {release_tag} deposit

- install postgresql 
  wget http://wwwmaster.postgresql.org/download/mirrors-ftp?file=%2Fsource%2Fv8.3.5%2Fpostgresql-8.3.5.tar.gz
  tar xvfz postgresql-8.3.5.tar.gz
  cd postgresql-8.3.5
  ./configure --without-readline --prefix=/opt/local/postgresql-8.3.5
  make install
  
- install python2.6
  ./configure --prefix=/opt/local/python2.6 --enable-shared --with-solaris
  make install

- install psycopg2
  wget http://www.initd.org/pub/software/psycopg/psycopg2-2.0.8.tar.gz
  tar xvfz psycopg2-2.0.8.tar.gz
  cd psycopg2-2.0.8
  edit setup.cfg to have this line:
    library_dirs=/opt/local/postgresql/lib:/opt/local/python2.6/lib
  python setup.py install

- django
  wget http://www.djangoproject.com/download/1.0/tarball/
  gunzip Django-1.0.tar.gz
  tar xvf Django-1.0.tar
  cd Django-1.0
  python setup.py install

- set system runtime library path
  pfexec crle -c /var/ld/ld.config -l /lib:/usr/lib:/opt/local/python/lib:/opt/local/postgresql/lib
  
- build and configure deposit application
  cp /opt/local/deposit/conf/depositqa-settings.py /opt/local/deposit/deposit/settings.py
  edit /opt/local/deposit/deposit/settings.py and change DATABASE_PASSWORD
  cd /opt/local/deposit/deposit
  python manage.py syncdb

- apache
  wget http://apache.mirrors.tds.net/httpd/httpd-2.2.10.tar.gz
  gunzip httpd-2.2.10.tar.gz 
  tar xvf httpd-2.2.10.tar 
  cd httpd-2.2.10
  ./configure --prefix=/opt/local/apache2
  make
  make install
  cp /opt/local/deposit/conf/depositqa-httpd.conf /opt/local/apache2/conf/httpd.conf

- mod_wsgi
  wget http://modwsgi.googlecode.com/files/mod_wsgi-2.3.tar.gz
  gunzip mod_wsgi-2.3.tar.gz 
  tar xvf mod_wsgi-2.3.tar 
  cd mod_wsgi-2.3
  ./configure --with-apxs=/opt/local/apache2/bin/apxs --with-python=/opt/local/python2.6/bin/python
  make
  make install
  mkdir /opt/local/.python-eggs
  pfexec chown daemon:daemon /opt/local/.python-eggs

- start apache
  pfexec su -
  /opt/local/apache2/bin/apachectl stop
  /opt/local/apache2/bin/apachectl start
