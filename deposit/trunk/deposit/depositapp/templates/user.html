{% extends "base.html" %}
{% load query_tags %}

{% block styles_extra %}
    <style type="text/css" >
    @import url(/media/css/deposit_2col.css);
    </style>
{% endblock styles_extra %}

{% block title %}Update User Info{% endblock title %}

{% block content %}

<div id="leftbox">
  <div id="userDetails">
    <h3>User Details</h3>
    <ul>
      <li>Is Active?: {{ deposit_user.is_active }}</li>
      <li>First Name: {{ deposit_user.first_name }}</li>
      <li>Last Name: {{ deposit_user.last_name }}</li>
      <li>Email: {{ deposit_user.email }}</li>
  {% with deposit_user.get_profile as profile %}
      <li>Address: {{ profile.address }}</li>
      <li>Organization: {{ profile.organization }}</li>
      <li>Phone: {{ profile.phone }}</li>
      {% if deposit_user.is_staff %}
      <li><strong>Deposit Staff</strong></li>
      {% endif %}
      {% if deposit_user.is_superuser %}
      <li><strong>Deposit Superuser</strong></li>
      {% endif %}
  {% endwith %}
    </ul>
  </div>

<div id="updateUserDetails">
  <div id="bottom_nav">
    <h2>Update name/email</h2>
    <form method="post" action='{% url user_command_url deposit_user.username "user" %}'>
    <fieldset>
        <label for="id_first_name">First Name</label>&nbsp;<input id="id_first_name" name="first_name" type="text" maxlength="30" value="{{ deposit_user.first_name }}" /><br />
        <label for="id_last_name">Last Name</label>&nbsp;<input id="id_last_name" name="last_name" type="text" maxlength="30" value="{{ deposit_user.last_name }}" /><br />
        {{ user_form.email.errors }}
        <label for="id_email">E-mail Address</label>&nbsp;<input id="id_email" name="email" type="text" maxlength="75" value="{{ deposit_user.email }}" /><br />
    </fieldset>
    <fieldset id="submit">
        <input class="submit" name="submit" type="submit" value="Update" />
    </fieldset>
    </form>
  </div>
</div>

<div id="updateUserProfile">
  <div id="bottom_nav">
    <h2>Update contact information</h2>
    <form method="post" action='{% url user_command_url deposit_user.username "profile" %}'>
      <fieldset>
        {% with deposit_user.get_profile as profile %}
        <label for="id_organization">Organization</label>&nbsp;<input id="id_organization" name="organization" type="text" maxlength="150" value="{{ profile.organization }}" /><br />
        <label for="id_address">Address</label>&nbsp;<input id="id_address" name="address" type="text" maxlength="255" value="{{ profile.address }}" /><br />
        <label for="id_phone">Phone</label>&nbsp;<input id="id_phone" name="phone" type="text" maxlength="10" value="{{ profile.phone }}" /><br />
        {% endwith %}
    </fieldset>
    <fieldset id="submit">
        <input class="submit" name="submit" type="submit" value="Update" />
    </fieldset>
    </form>
  </div>
</div>

<div id="changePassword">
  <div id="bottom_nav">
    <h2>Change Password</h2>
    {% if password_form.errors %}
        <p>Please try to change your password again.</p>
    {% endif %}
    <form method="post" action='{% url user_command_url user.username "password" %}'>
        <fieldset>
            <label for="id_old_password">Old Password</label>&nbsp;<input id="id_old_password" name="old_password" type="password" /><br />
            <label for="id_new_password1">New Password</label>&nbsp;<input id="id_new_password1" name="new_password1" type="password" /><br />
            <label for="id_new_password2">New Password confirmation</label>&nbsp;<input id="id_new_password2" name="new_password2" type="password" /><br />
        </fieldset>
        <fieldset id="submit">
            <input class="submit" name="submit" type="submit" value="Change" />
        </fieldset>
</form>
  </div>
</div>

</div>

{% endblock content %}
