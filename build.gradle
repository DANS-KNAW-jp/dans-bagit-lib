apply plugin: 'java'
apply plugin: 'jacoco'
apply plugin: 'findbugs'
apply plugin: 'pmd'
apply from: 'eclipse.gradle'
apply from: 'maven-central.gradle'

sourceCompatibility = 1.8
targetCompatibility = 1.8

if(project.version == "unspecified"){
  project.version = "5.0-SNAPSHOT"
}

repositories {
  jcenter()
}

dependencies {
  compile 'org.slf4j:slf4j-api:latest.integration'
    
  testCompile 'junit:junit:latest.integration', 
    'org.springframework.boot:spring-boot-starter-logging:latest.integration',
    'org.bouncycastle:bcprov-jdk15on:latest.integration'
}

test { //show test output
  testLogging.showStandardStreams = true
}

jacoco {
  toolVersion = "0.7.5.201505241946" //needed for jenkins to report code coverage correctly
}
jacocoTestReport.dependsOn test
check.dependsOn jacocoTestReport

findbugsTest.enabled = false

findbugs {
  ignoreFailures = true //don't fail the gradle build if bugs are found
}

pmdTest.enabled = false

pmd {
  ruleSets = ["java-basic", "java-braces", "java-empty"]
}
